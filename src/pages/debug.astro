---
export const prerender = false;

let envInfo = {};
let error = null;

try {
  const runtime = Astro.locals.runtime;
  if (runtime && runtime.env) {
    envInfo = {
      keys: Object.keys(runtime.env),
      hasDB: !!runtime.env.DB,
      hasR2: !!runtime.env.R2_ASSETS,
      dbType: typeof runtime.env.DB,
      r2Type: typeof runtime.env.R2_ASSETS
    };
  } else {
    envInfo = { error: "Astro.locals.runtime.env is missing" };
  }
} catch (e: any) {
  error = e.toString();
}
---

<html lang="en">
<head>
    <title>Debug Environment</title>
</head>
<body style="font-family: monospace; padding: 2rem;">
    <h1>Debug Environment</h1>
    
    <h2>Runtime Env Checks</h2>
    <pre>{JSON.stringify(envInfo, null, 2)}</pre>

    {error && (
        <div>
            <h2>Error</h2>
            <pre>{error}</pre>
        </div>
    )}
</body>
</html>
